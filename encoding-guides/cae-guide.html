---
title: Guide CAE
description: 'L'encodage contextuel (CAE) analyse chaque vidéo source et crée intelligemment une échelle de débit binaire personnalisée (ensemble de rendus) pour chaque élément de contenu. De plus, l'encodage contextuel prend en compte les contraintes associées au réseau de distribution et au périphérique utilisé pour afficher le contenu. Il décide du nombre de rendus nécessaire et des résolutions et débits qui doivent être utilisés pour chaque élément, tout en conservant un niveau de qualité constant pour tous les titres. Cela se traduit par des économies considérables sur les coûts de stockage et de bande passante, tout en améliorant l'expérience de lecture pour les utilisateurs. Pour plus d'informations, consultez la <a href="/general-information/overview-context-aware-encoding.html">présentation de l'encodage contextuel</a>.'
parent: Encoding Guides
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>

  <section class="bcls-section">
    <h2 id="Overview">Vue d'ensemble</h2>

    <aside class="bcls-aside bcls-aside--information">Notes :
      <ul>
        <li>L'encodage contextuel n'est pas disponible pour tous les clients Zencoder. Si vous avez des questions sur l'utilisation ou non de l'encodage contextuel, veuillez contacter votre responsable de compte.</li>
        <!-- <li>The <a href="/encoding-guides/av1-guide.html">AV1 video codec</a> is currently not supported for CAE jobs.</li> -->
      </ul>
    </aside>
  </section>
  <section class="bcls-section">
    <h2 id="process">Processus</h2>

    <p>CAE est activé sur une tâche Zencoder en définissant <code translate="No"><a href="/encoding-settings/general/encoding-settings-job.html#generate_dynamic_profile"><code translate="No">generate_dynamic_profile</code></a></code> à vrai et en ajoutant <a href="/encoding-settings/general/encoding-settings-general-output-settings.html#dynamic_profile_rendition"><code translate="No">dynamic_profile_rendition</code></a> valeurs aux sorties du travail. De plus, vous pouvez ajouter <a href="/encoding-settings/general/cae-settings.html"><code translate="No">dynamic_profile_options</code></a>, mais cela n'est pas nécessaire. Après avoir téléchargé et inspecté le fichier source d'entrée pour la tâche, Zencoder exécute le générateur de profil dynamique CAE sur le fichier source. Les paramètres d'échelle de profil dynamique résultants sont ajoutés à chaque sortie correspondante avant d'être encodés. Les paramètres suivants sont automatiquement définis pour les sorties avec une valeur dynamic_profile_rendu :</p>

    <ul>
      <li><code translate="No">width</code></li>
      <li><code translate="No">height</code></li>
      <li><code translate="No">frame_rate</code></li>
      <li><code translate="No">video_codec</code></li>
      <li><code translate="No">video_codec_profile</code></li>
      <li><code translate="No">video_codec_tier</code></li>
      <li><code translate="No">video_codec_level</code></li>
      <li><code translate="No">video_reference_frames</code></li>
      <li><code translate="No">video_bframes</code></li>
      <li><code translate="No">video_bitrate</code></li>
      <li><code translate="No">decoder_bitrate_cap</code></li>
      <li><code translate="No">decoder_buffer_size</code></li>
      <li><code translate="No">keyframe_rate</code></li>
      <li><code translate="No">fixed_keyframe_interval</code></li>
    </ul>
    <p><strong>Sorties de codec mixtes :</strong> vous pouvez générer des rendus mixtes HEVC/H.264. Voir <a href="/encoding-settings/general/cae-settings.html">Paramètres CAE</a> pour plus de détails.</p>
    <p>Autres sorties sans <a href="/encoding-settings/general/encoding-settings-general-output-settings.html#dynamic_profile_rendition"> <code translate="No">dynamic_profile_rendition</code></a> commencera l'encodage dès que la source d'entrée est inspectée, simultanément pendant que le générateur de profil dynamique est en cours d'exécution.</p>
  </section>
  <section class="bcls-section">
    <h2 id="guidelines_for_configuring_dynamic_profile_options">Directives de configuration <a href="/encoding-settings/general/encoding-settings-general-output-settings.html#dynamic_profile_rendition"><code translate="No">dynamic_profile_options</code></a></h2>

    <h3>Nombre de rendus</h3>

    <p>Le nombre minimum et maximum de rendus à créer est contrôlé avec le <a href="/encoding-settings/general/cae-settings.html#min_renditions">min_renditions</a> et <a href="/encoding-settings/general/cae-settings.html#max_renditions">max_renditions</a> réglages. Pour de meilleures performances, il est recommandé de laisser un certain écart entre ces limites (par ex. <code translate="No">min_renditions</code> à 2 et <code translate="No">max_renditions</code> à 10), ce qui permet au générateur de profils CAE de sélectionner le numéro le plus adapté à chaque contenu. Pour un contenu facile à encoder, il peut produire moins de rendus, tandis que pour un contenu plus complexe, il peut en produire plus. Il est également recommandé de définir min_renditions pour qu'il soit aussi petit que possible, pour permettre d'économiser de la bande passante lorsque plus de rendus sont inutiles.</p>

    <h3>Résolutions</h3>

    <p>Par défaut, CAE utilise une échelle d'environ 30 résolutions standard, allant de <code translate="No">192x108</code> à <code translate="No">7680x4320</code>. Il peut être limité sur le bas ou le haut de gamme en utilisant le <a href="/encoding-settings/general/cae-settings.html#min_resolution">résolution_min</a> et <a href="/encoding-settings/general/cae-settings.html#max_resolution">max_resolution</a> réglages. Alternativement, une liste personnalisée des résolutions et des paramètres de codec associés peut être fournie dans le <a href="/encoding-settings/general/cae-settings.html#video_configurations"><code translate="No">video_configurations</code></a> réglage.</p>

    <h3>Longueur GOP</h3>

    <p>Le <a href="/encoding-settings/general/cae-settings.html#keyframe_rate"><code translate="No">keyframe_rate</code></a> paramètre contrôle la <code translate="No">GOP</code> longueur maximale du contenu codé. Réglez ceci pour qu'il corresponde à <a href="/encoding-settings/general-audio-video/encoding-settings-segmented-streaming.html#segment_seconds"><code translate="No">segment_seconds</code></a> pour le codage HLS / DASH. Sinon, une valeur de 0,5 est recommandée, correspondant à 2 secondes <code translate="No">GOP</code> longueur.</p>

    <h3>Couverture du débit binaire</h3>

    <p>Les limites des débits à utiliser peuvent être contrôlées par le <a href="/encoding-settings/general/cae-settings.html#min_bitrate"><code translate="No">min_bitrate</code></a> et <a href="/encoding-settings/general/cae-settings.html#max_bitrate"><code translate="No">max_bitrate</code></a> réglages. Cela demandera à CAE d'allouer au moins <a href="/encoding-settings/general/cae-settings.html#min_bitrate"><code translate="No">min_bitrate</code></a> Kbps pour le premier rendu et contraindre le dernier rendu à au plus <a href="/encoding-settings/general/cae-settings.html#max_bitrate"><code translate="No">max_bitrate</code></a> Kbps.</p>

    <p>Pour vous assurer que les débits de rendu sont correctement espacés, utilisez le <a href="/encoding-settings/general/cae-settings.html#min_granularity"><code translate="No">min_granularity</code></a> et <a href="/encoding-settings/general/cae-settings.html#max_granularity"><code translate="No">max_granularity</code></a> réglages. Par exemple, ceux-ci peuvent être utilisés pour s'assurer que le pas d'un débit binaire au suivant n'est pas inférieur à une augmentation de 50% du débit binaire ou supérieur à une augmentation de 100% du débit binaire. Veuillez noter que la plupart des directives de création de flux recommandent que la granularité ne dépasse pas 100%.</p>

    <h3>Latence de démarrage, fiabilité dans de mauvaises conditions de réseau</h3>

    <p>Pour vous assurer que l'échelle de débit commence toujours avec un débit suffisamment bas, utilisez le <a href="/encoding-settings/general/cae-settings.html#max_first_rendition_bitrate"><code translate="No">max_first_rendition_bitrate</code></a> réglage. Plus le débit binaire du premier rendu est bas, moins il est probable qu'un lecteur vidéo ait besoin de mettre en mémoire tampon en raison des faibles vitesses de connexion. De plus, si le manifeste de diffusion en continu indique de charger en premier le débit binaire le plus bas, cela affectera également directement la latence de démarrage.</p>

    <h3>Prise en charge des appareils hérités</h3>

    <p>Pour prendre en charge des appareils plus anciens qui ne peuvent <code translate="No"><code translate="No">Baseline</code></code> lecture du profil H.264, utilisez le <a href="/encoding-settings/general/cae-settings.html#select_baseline_profile_configuration"><code translate="No">select_baseline_profile_configuration</code></a> réglage. Lorsque ce paramètre est défini, au moins un rendu sera encodé avec <code translate="No">Baseline</code> profil. Des contraintes supplémentaires (profil de codec, niveau, nombre de trames de référence, b-frames, etc.) peuvent être contrôlées avec un <a href="/encoding-settings/general/cae-settings.html#video_configurations"><code translate="No">video_configurations</code></a> réglage.</p>
    <p>Noter que <code translate="No">select_baseline_profile_configuration</code> est <code translate="No">true</code> par défaut, et cela nécessite <em>au moins une interprétation</em> pour avoir une résolution égale ou inférieure à 512x288.</p>

    <h3>Contrôle de variabilité VBR</h3>

    <p>Les débits binaires maximaux peuvent être contrôlés avec <a href="/encoding-settings/general/cae-settings.html#bitrate_cap_to_bitrate_ratio"><code translate="No">bitrate_cap_to_bitrate_ratio</code></a> et <a href="/encoding-settings/general/cae-settings.html#bitrate_cap_offset">bitrate_cap_offset</a> réglages. Si un débit «<code translate="No">R</code>» est sélectionné pour un rendu, le <a href="/encoding-settings/general-audio-video/encoding-settings-rate-control.html#decoder_bitrate_cap">décoder_bitrate_cap</a> est calculé comme suit :</p>

    <pre class="line-numbers">
  <code class="language-javascript" translate="No">decoder_bitrate_cap = R * bitrate_cap_to_bitrate_ratio + bitrate_cap_offset</code></code></pre>

    <p>De même, les limites du tampon du décodeur peuvent être contrôlées avec le <a href="/encoding-settings/general/cae-settings.html#buffer_size_to_bitrate_ratio"><code translate="No">buffer_size_to_bitrate_ratio</code></a> et <a href="/encoding-settings/general/cae-settings.html#buffer_size_offset"><code translate="No">buffer_size_offset</code></a> réglages. La valeur <a href="/encoding-settings/general-audio-video/encoding-settings-rate-control.html#decoder_buffer_size"><code translate="No">decoder_buffer_size</code></a> est calculée comme suit :</p>

    <pre class="line-numbers">
  <code class="language-javascript" translate="No">decoder_buffer_size = R * buffer_size_to_bitrate_ratio + buffer_size_offset</code></pre>

    <p>Notez que le débit binaire maximal et les limites de tampon peuvent également être limités par le profil de codec et / ou les paramètres de niveau. Certains problèmes généraux de compatibilité des appareils peuvent être évités en limitant <a href="/encoding-settings/general/cae-settings.html#bitrate_cap_to_bitrate_ratio"><code translate="No">bitrate_cap_to_bitrate_ratio</code></a> la version 2.0 ou inférieure, et <a href="/encoding-settings/general/cae-settings.html#buffer_size_to_bitrate_ratio"><code translate="No">buffer_size_to_bitrate_ratio</code></a> à <code translate="No">2.0 * GOP length</code>(en secondes).</p>
  </section>
  <section class="bcls-section">
    <h2 id="CAE_and_Segmented_outputs">CAE et sorties segmentées</h2>

    <p>CAE est compatible avec les sorties segmentées dans Zencoder. Sur le <code translate="No">Output</code> paramètres de rendu, définissez les <a href="/encoding-settings/general/encoding-settings-general-output-settings.html#type"><code translate="No">type</code></a> comme <code translate="No">segmented</code> et le approprié <a href="/encoding-settings/general-audio-video/encoding-settings-segmented-streaming.html#segment_seconds"><code translate="No">segment_seconds</code></a> valeur. Également, <a href="/encoding-settings/general/cae-settings.html#keyframe_rate"><code translate="No">keyframe_rate</code></a> et <a href="/encoding-settings/general-audio-video/encoding-settings-frame-rate.html#fixed_keyframe_interval"><code translate="No">fixed_keyframe_interval</code></a> les paramètres doivent être définis dans <code translate="No">dynamic_profile_options</code>.</p>

    <h3>Exemple CAE - HLS</h3>

    <pre class="line-numbers">
  <code class="language-json" translate="No">{
    "input": "s3://test_bucket/test_media.mp4",
    "generate_dynamic_profile": true,
    "dynamic_profile_options": {
      "max_renditions": 6,
      "min_renditions": 2,
      "select_baseline_profile_configuration": true,
      "keyframe_rate": "0.5",
      "fixed_keyframe_interval": "true"
    },
    "outputs": [
      {
        "label": "CAE1",
        "dynamic_profile_rendition": 1,
        "base_url": "s3://test_bucket/outputs/HLS_CAE/CAE1",
        "filename": "CAE1.m3u8",
        "type": "segmented",
        "segment_seconds": 2,
        "byte_range_segmenting": true,
        "generate_keyframe_manifest": "true",
        "hls_protocol_version": 7,
        "skip_audio": true
      },
      {
        "label": "CAE2",
        "dynamic_profile_rendition": 2,
        "base_url": "s3://test_bucket/outputs/HLS_CAE/CAE2",
        "filename": "CAE2.m3u8",
        "type": "segmented",
        "segment_seconds": 2,
        "byte_range_segmenting": true,
        "generate_keyframe_manifest": "true",
        "hls_protocol_version": 7,
        "skip_audio": true
      },
      {
        "label": "CAE3",
        "dynamic_profile_rendition": 3,
        "base_url": "s3://test_bucket/outputs/HLS_CAE/CAE3",
        "filename": "CAE3.m3u8",
        "type": "segmented",
        "segment_seconds": 2,
        "byte_range_segmenting": true,
        "generate_keyframe_manifest": "true",
        "hls_protocol_version": 7,
        "skip_audio": true
      },
      {
        "label": "CAE4",
        "dynamic_profile_rendition": 4,
        "base_url": "s3://test_bucket/outputs/HLS_CAE/CAE4",
        "filename": "CAE4.m3u8",
        "type": "segmented",
        "segment_seconds": 2,
        "byte_range_segmenting": true,
        "generate_keyframe_manifest": "true",
        "hls_protocol_version": 7,
        "skip_audio": true
      },
      {
        "label": "CAE5",
        "dynamic_profile_rendition": 5,
        "base_url": "s3://test_bucket/outputs/HLS_CAE/CAE5",
        "filename": "CAE5.m3u8",
          "type": "segmented",
          "segment_seconds": 2,
          "byte_range_segmenting": true,
          "generate_keyframe_manifest": "true",
          "hls_protocol_version": 7,
          "skip_audio": true
        },
        {
          "label": "CAE6",
          "dynamic_profile_rendition": 6,
          "base_url": "s3://test_bucket/outputs/HLS_CAE/CAE6",
          "filename": "CAE6.m3u8",
          "type": "segmented",
          "segment_seconds": 2,
          "byte_range_segmenting": true,
          "generate_keyframe_manifest": "true",
          "hls_protocol_version": 7,
          "skip_audio": true
        }
        {
          "label": "Audio",
          "audio_bitrate": "128",
          "type": "segmented",
          "segment_seconds": 2,
          "byte_range_segmenting": true,
          "skip_video": true,
          "base_url": "s3://test_bucket/outputs/HLS_CAE/Audio/128k/",
          "filename": "audio_128k.ac3"
        },
        {
          "base_url": "s3://test_bucket/outputs/HLS_CAE/",
          "filename": "master_playlist.m3u8",
          "hls_protocol_version": 7,
          "type": "playlist",
          "allow_skipped_sources": true,
          "alternate_audio": {
            "128k_audio": {
              "path": "Audio/128k/audio_128k.m3u8",
              "language": "en",
              "source": "Audio"
            }
          }
          ],
          "streams": [
            {
              "path": "CAE1/CAE1.m3u8",
              "source": "CAE1",
              "audio": "128k_audio"
            },
            {
              "path": "CAE2/CAE2.m3u8",
              "source": "CAE2",
              "audio": "128k_audio"
            },
            {
              "path": "CAE3/CAE3.m3u8",
              "source": "CAE3",
              "audio": "128k_audio"
            },
            {
              "path": "CAE4/CAE4.m3u8",
              "source": "CAE4",
              "audio": "128k_audio"
            },
            {
              "path": "CAE5/CAE5.m3u8",
              "source": "CAE5",
              "audio": "128k_audio"
            },
            {
              "path": "CAE6/CAE6.m3u8",
              "source": "CAE6",
              "audio": "128k_audio"
            }
          ]
        }
      ]
    }</code></pre>

    <h3>Exemple CAE - DASH</h3>

    <pre class="line-numbers">
  <code class="language-json" translate="No">
  {
    "input": "s3://test_bucket/test.mov",
    "generate_dynamic_profile": true,
    "dynamic_profile_options": {
      "max_renditions": 6,
      "min_renditions": 2,
      "select_baseline_profile_configuration": true,
      "keyframe_rate": "0.5",
      "fixed_keyframe_interval": "true"
    },
    "outputs": [
      {
        "label": "CAE1",
        "dynamic_profile_rendition": 1,
        "base_url": "s3://test_bucket/outputs/DASH_CAE/CAE1",
        "filename": "CAE1.mpd",
        "type": "segmented",
        "segment_seconds": 10,
        "streaming_delivery_format": "dash",
        "skip_audio": true,
        "public": true
      },
      {
        "label": "CAE2",
        "dynamic_profile_rendition": 2,
        "base_url": "s3://test_bucket/outputs/DASH_CAE/CAE2",
        "filename": "CAE2.mpd",
        "type": "segmented",
        "segment_seconds": 10,
        "streaming_delivery_format": "dash",
        "skip_audio": true,
        "public": true
      },
      {
        "label": "CAE3",
        "dynamic_profile_rendition": 3,
        "base_url": "s3://test_bucket/outputs/DASH_CAE/CAE3",
        "filename": "CAE3.mpd",
        "type": "segmented",
        "segment_seconds": 10,
        "streaming_delivery_format": "dash",
        "skip_audio": true,
        "public": true
      },
      {
        "label": "CAE4",
        "dynamic_profile_rendition": 4,
        "base_url": "s3://test_bucket/outputs/DASH_CAE/CAE4",
        "filename": "CAE4.mpd",
        "type": "segmented",
        "segment_seconds": 10,
        "streaming_delivery_format": "dash",
        "skip_audio": true,
        "public": true
      },
      {
        "label": "CAE5",
        "dynamic_profile_rendition": 5,
        "base_url": "s3://test_bucket/outputs/DASH_CAE/CAE5",
        "filename": "CAE5.mpd",
        "type": "segmented",
        "segment_seconds": 10,
        "streaming_delivery_format": "dash",
        "skip_audio": true,
        "public": true
      },
      {
        "label": "CAE6",
        "dynamic_profile_rendition": 6,
        "base_url": "s3://test_bucket/outputs/DASH_CAE/CAE6",
        "filename": "CAE6.mpd",
        "type": "segmented",
        "segment_seconds": 10,
        "streaming_delivery_format": "dash",
        "skip_audio": true,
        "public": true
      },
      {
        "label": "Audio",
        "audio_bitrate": "128",
        "type": "segmented",
        "segment_seconds": 10,
        "streaming_delivery_format": "dash",
        "skip_video": true,
        "base_url": "s3://test_bucket/outputs/DASH_CAE/Audio/128k/",
        "filename": "audio_128k.mpd",
        "public": true
      },
      {
        "base_url": "s3://test_bucket/outputs/DASH_CAE/",
        "filename": "master_playlist.mpd",
        "streaming_delivery_format": "dash",
        "type": "playlist",
        "allow_skipped_sources": true,
        "public": true,
        "streams": [
          {
            "path": "CAE1/CAE1.mpd",
            "source": "CAE1"
          },
          {
            "path": "CAE2/CAE2.mpd",
            "source": "CAE2"
          },
          {
            "path": "CAE3/CAE3.mpd",
            "source": "CAE3"
          },
          {
            "path": "CAE4/CAE4.mpd",
            "source": "CAE4"
          },
          {
            "path": "CAE5/CAE5.mpd",
            "source": "CAE5"
          },
          {
            "path": "CAE6/CAE6.mpd",
            "source": "CAE6"
          },
          {
            "path": "Audio/128k/audio_128k.mpd",
            "source": "Audio"
          }
        ]
      }
    ]
   }
  </code></pre>
  </section>
</article>
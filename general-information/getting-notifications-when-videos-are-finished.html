---
title: Recevoir des notifications lorsque les vidéos sont terminées Description : Cette rubrique vous montre comment recevoir des notifications lorsque votre tâche Zencoder est terminée.
parent: General Information
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>
  <section class="bcls-section">
    <h2 id="Overview">Vue d'ensemble</h2>

    <p>Une fois qu'un travail ou un fichier de sortie est terminé, vous pouvez en savoir plus de plusieurs manières.</p>

    <ul>
      <li>Nous pouvons POSTER une requête HTTP à votre application avec les détails.</li>
      <li>Vous pouvez demander vos notifications à l'aide d'un outil tiers tel que <a href="https://ngrok.com">ngrok</a>. Ceci est utile lorsque vous développez localement et que Zencoder ne peut pas atteindre votre serveur de développement.</li>
      <li>Nous pouvons envoyer un e-mail.</li>
      <li>Vous pouvez consulter le tableau de bord Zencoder pour connaître l'état de la tâche.</li>
    </ul>
  </section>
  <section class="bcls-section">
    <h2 id="http_email_notifications">Recevez des notifications HTTP / e-mail</h2>

    <p>Pour recevoir des notifications HTTP ou par e-mail, ajoutez des options de <a href="/encoding-settings/general/encoding-settings-notifications.html">notification</a> à votre demande d'API, comme ceci :</p>

    <pre class="line-numbers">
<code class="language-json" translate="No">{
  "api_key": "93h630j1dsyshjef620qlkavnmzui3",
  "input": "s3://bucket-name/file-name.avi",
  "notifications": [
  "http://user:password@example.com/zencoder",
  "admin@example.com"
  ],
  "outputs": [
  {
      "label": "web",
      "url": "s3://output-bucket/web.mp4",
      "size": "512x384",
      "notifications": [
      "http://user:password@example.com/zencoder",
      "admin@example.com"
      ]
  },
  {
      "label": "iphone",
      "url": "s3://output-bucket/iphone.m4v",
      "size": "480x320",
      "notifications": [
      {"format": "xml", "url": "http://user:password@example.com/zencoder1"},
      {"format": "json", "url": "http://user:password@example.com/zencoder2"},
      "http://example.com/zencoder3",
      "admin@example.com"
      ]
  }
  ]
}</code></pre>

    <p>Dans cet exemple, lorsque le premier fichier de sortie est terminé, deux notifications sont envoyées :</p>

    <ul>
      <li>Envoyer un e-mail à <code translate="No">admin@example.com</code> avec des informations sur la sortie et l'entrée/tâche.</li>
      <li>HTTP POST vers <code translate="No">http://user:password@example.com/zencoder</code> avec un en-tête Content-Type défini sur 'application/json' avec des informations sur la sortie et l'entrée/tâche.</li>
    </ul>
    <p>Lorsque le deuxième fichier de sortie est terminé, quatre autres notifications seront envoyées :</p>

    <ul>
      <li>HTTP POST vers <code translate="No">http://example.com/zencoder1</code> avec un en-tête Content-Type défini sur 'application/xml' avec des informations sur la sortie et l'entrée.</li>
      <li>HTTP POST vers <code translate="No">http://example.com/zencoder2</code> avec un en-tête Content-Type défini sur 'application/json' avec des informations sur la sortie et l'entrée/tâche.</li>
      <li>Envoyer un e-mail à <code translate="No">admin@example.com</code> avec des informations sur la sortie et l'entrée/tâche.</li>
      <li>HTTP POST vers <code translate="No">http://example.com/zencoder3</code> avec un en-tête Content-Type défini sur 'application/json' avec des informations sur la sortie et l'entrée/tâche.</li>
    </ul>
    <p>Une fois la tâche terminée, deux autres notifications seront envoyées :</p>

    <ul>
      <li>Envoyer à <code translate="No">admin@example.com</code> avec des informations sur la sortie et l'entrée.</li>
      <li>HTTP POST vers <code translate="No">http://user:password@example.com/zencoder</code> avec un en-tête Content-Type défini sur 'application/json' avec des informations sur la sortie et l'entrée.</li>
    </ul>
    <p><strong>Note :</strong> Si Zencoder ne parvient pas à se connecter avec succès au serveur cible lors de l'envoi d'une notification, la notification sera mise en file d'attente pour réessayer. La notification sera tentée jusqu'à 20 fois, le délai entre les tentatives doublant à chaque fois.</p>
  </section>
  <section class="bcls-section">
    <h2 id="HTTP_Notifications">Notifications HTTP</h2>

    <p>Les notifications contiennent un contenu riche avec beaucoup plus d'informations sur le travail et les fichiers d'entrée et de sortie. Le corps de la notification peut contenir du JSON ou du XML. Si les téléchargements échouent, les notifications contiendront également des informations sur <a href="/general-information/faq-rate-limiting.html">erreurs et serveurs de sauvegarde utilisés</a>.</p>

    <aside class="bcls-aside bcls-aside--information">Les gestionnaires de notifications sur les serveurs construits sur HTTP2 ne sont actuellement pas pris en charge. Les notifications envoyées aux serveurs HTTP2 peuvent ne pas être délivrées sans renvoyer d'erreur.</aside>
    <h3>Exemple de notification de travail</h3>

    <pre class="line-numbers">
<code class="language-json" translate="No">{
  "outputs":[
  {
      "height":120,
      "audio_sample_rate":8000,
      "frame_rate":8.0,
      "channels":"1",
      "duration_in_ms":1920,
      "video_bitrate_in_kbps":70,
      "video_codec":"h264",
      "format":"mpeg4",
      "audio_codec":"aac",
      "label":null,
      "file_size_in_bytes":17938,
      "width":160,
      "audio_bitrate_in_kbps":9,
      "id":235314,
      "total_bitrate_in_kbps":79,
      "state":"finished",
      "url":"ftp://example.com/file.mp4",
      "md5_checksum":"7f106918e02a69466afa0ee014172496",
      "thumbnails": [
      {
          "label":"poster",
          "images":
          [
          {
              "url": "ftp://example.com/images/123.png",
              "format": "PNG",
              "file_size_bytes": 1273573,
              "dimensions": "1280x720"
          }
          ]
      }
      ]
  },
  {
      "height":120,
      "audio_sample_rate":8000,
      "frame_rate":8.0,
      "channels":"1",
      "duration_in_ms":1920,
      "video_bitrate_in_kbps":70,
      "video_codec":"h264",
      "format":"mpeg4",
      "audio_codec":"aac",
      "label":null,
      "file_size_in_bytes":17938,
      "width":160,
      "audio_bitrate_in_kbps":9,
      "id":235314,
      "total_bitrate_in_kbps":79,
      "state":"finished",
      "url":"ftp://example.com/file.mp4",
      "md5_checksum":"7f106918e02a69466afa0ee014172496",
      "thumbnails": [
      {
          "label":"poster",
          "images":
          [
          {
              "url": "ftp://example.com/images/123.png",
              "format": "PNG",
              "file_size_bytes": 1273573,
              "dimensions": "1280x720"
          }
          ]
      }
      ]
  }
  ],
  "job":{
      "created_at":"2011-09-27T04:20:10Z",
      "pass_through":null,
      "updated_at":"2011-09-27T04:21:18Z",
      "submitted_at":"2011-09-27T04:20:10Z",
      "id":172151,
      "state":"finished"
  },
  "input":{
      "height":120,
      "audio_sample_rate":8000,
      "frame_rate":8.0,
      "channels":"1",
      "duration_in_ms":1552,
      "video_bitrate_in_kbps":32,
      "video_codec":"mpeg4",
      "format":"mpeg4",
      "audio_codec":"aac",
      "file_size_in_bytes":13960,
      "width":160,
      "audio_bitrate_in_kbps":9,
      "id":172149,
      "state":"finished",
      "total_bitrate_in_kbps":41,
      "md5_checksum":"7f106918e02a69466afa0ee014174143"
  }
}</code></pre>

    <h3>Exemple de notification de sortie</h3>

    <pre class="line-numbers">
<code class="language-json" translate="No">{
  "output":{
      "height":120,
      "audio_sample_rate":8000,
      "frame_rate":8.0,
      "channels":"1",
      "duration_in_ms":1920,
      "video_bitrate_in_kbps":70,
      "video_codec":"h264",
      "format":"mpeg4",
      "audio_codec":"aac",
      "label":null,
      "file_size_in_bytes":17938,
      "width":160,
      "audio_bitrate_in_kbps":9,
      "id":235314,
      "total_bitrate_in_kbps":79,
      "state":"finished",
      "url":"ftp://example.com/file.mp4",
      "md5_checksum":"7f106918e02a69466afa0ee014172496",
      "thumbnails":
      [
      {
          "label":"poster",
          "images":
          [
          {
              "url": "ftp://example.com/images/123.png",
              "format": "PNG",
              "file_size_bytes": 1273573,
              "dimensions": "1280x720"
          }
          ]
      }
      ]
  },
  "job":{
      "created_at":"2011-09-27T04:20:10Z",
      "pass_through":null,
      "updated_at":"2011-09-27T04:21:18Z",
      "submitted_at":"2011-09-27T04:20:10Z",
      "id":172151,
      "state":"finished"
  },
  "input":{
      "height":120,
      "audio_sample_rate":8000,
      "frame_rate":8.0,
      "channels":"1",
      "duration_in_ms":1552,
      "video_bitrate_in_kbps":32,
      "video_codec":"mpeg4",
      "format":"mpeg4",
      "audio_codec":"aac",
      "file_size_in_bytes":13960,
      "width":160,
      "audio_bitrate_in_kbps":9,
      "id":172149,
      "state":"finished",
      "total_bitrate_in_kbps":41,
      "md5_checksum":"7f106918e02a69466afa0ee014174143"
  }
}</code></pre>
  </section>
</article>
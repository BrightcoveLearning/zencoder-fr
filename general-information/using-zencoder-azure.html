---
title: Utilisation de Zencoder avec Azure Description : Zencoder peut télécharger et télécharger des fichiers (blobs) à partir de vos conteneurs Azure. Les détails du compte, du conteneur et du blob doivent être intégrés dans l'URL des entrées et sorties de la tâche.
parent: General Information
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>

<section class="bcls-section">
<h2 id="Working_with_Azure">Travailler avec Azure</h2>

<p>&nbsp;</p>

<p>Les URL Azure doivent utiliser le format azure : //account-name:account-key @container /blob. La demande de tâche suivante montre comment référencer des emplacements Azure pour les entrées et les sorties :</p>

<pre class="line-numbers">
<code class="language-json" translate="No">{
    "api_key": "93h630j1dsyshjef620qlkavnmzui3",
    "input": "azure://account-name:account-key@container/file-name.avi",
    "outputs": [
    {
        "url": "azure://account-name:account-key@container/output-file-name.mp4",
        "width": "1280",
        "height": "720"
    }
    ]
}</code></pre>

<p>Le <strong>nom de compte</strong> et la <strong>clé de compte</strong> doivent être évadés par CGI. Rien d'autre ne devrait avoir besoin d'être échappé, comme avec les autres URL dans Zencoder. Ils se trouvent dans l'interface de gestion Azure. Le nom du compte est le nom du compte de stockage (lié à la région, etc.). Les clés sont disponibles en bas de l'écran d'aperçu du compte.</p>

<p>Chaque compte Azure peut avoir plusieurs conteneurs. Les <strong>récipient</strong> Le champ de l'URL doit être défini et configuré dans Azure avant de pouvoir être utilisé dans une tâche Zencoder.</p>

<p>Les <strong>goutte</strong> champ dans l'URL représente le nom du fichier. L'objet blob est le seul composant de l'URL qui n'a pas besoin d'être configuré à l'avance dans Azure.</p>
</section>

<section class="bcls-section">
  <h2 id="Azure_SAS_Token_Support">Prise en charge des jetons Azure SAS</h2>
  <p>La prise en charge de l'autorisation des transferts de fichiers Azure est incluse dans Zencoder. Seuls les jetons Account SAS sont actuellement pris en charge, et au moins les paramètres « sv », « si », « sr » et « sig » sont requis dans le cadre du jeton.</p>

  <p>Exemple de jeton SAS :</p>

<pre><code translate="No">sv=2019-10-10&si=sas-account&sr=c&sig=as87LKJHab87afjlghKJH654kjmasfRas02fabf34x8%3D</code></pre>

<p>Il existe deux façons d'inclure le jeton SAS avec une URL Azure :</p>
<ul>
  <li>Ajoutez le jeton à l'URL en tant que paramètre de chaîne de requête.</li>
  <li>Fournissez le jeton séparément avec le paramètre "azure_sas".</li>
</ul>
<aside class="bcls-aside bcls-aside--information">Note : L'URL Azure doit utiliser un schéma azure ://comme il est standard dans Zencoder, et non https ://.</aside>
<h3>Exemples de demandes d'API</h3>
<h4>URL d'entrée</h4>
<h5>Version de chaîne de requête</h5>
<pre class="line-numbers"><code class="language-json" translate="No">{  "input": "azure://account-name@container/path/to/input.mp4?sv=2019-10-10&si=sas-account&sr=c&sig=as87LKJHab87afjlghKJH654kjmasfRas02fabf34x8%3D"}</code></pre>
<h5>Version séparée des paramètres</h5>
<pre class="line-numbers"><code class="language-json" translate="No">{  "input": "azure://account-name@container/path/to/input.mp4",  "azure_sas": "sv=2019-10-10&si=sas-account&sr=c&sig=as87LKJHab87afjlghKJH654kjmasfRas02fabf34x8%3D"}</code></pre>
<h4>URL de sortie</h4>
<aside class="bcls-aside bcls-aside--information">Note : Pour les sorties multi-fichiers (telles que les sorties HLS avec un manifeste et des segments de média), le nom du fichier dans l'URL sera automatiquement mis à jour pour charger chaque fichier supplémentaire, mais le chemin et les paramètres seront conservés.</aside>
<h5>Version de chaîne de requête</h5>
<pre class="line-numbers"><code class="language-json" translate="No">{
  "outputs": [
    {
      "url": "azure://account-name@container/path/to/output.mp4?sv=2019-10-10&si=sas-account&sr=c&sig=as87LKJHab87afjlghKJH654kjmasfRas02fabf34x8%3D"
    }
  ]
}</code></pre>
<h5>Version séparée des paramètres</h5>
<pre class="line-numbers"><code class="language-json" translate="No">{
  "outputs": [
    {
      "url": "azure://account-name@container/path/to/output.mp4",  "azure_sas": "sv=2019-10-10&si=sas-account&sr=c&sig=as87LKJHab87afjlghKJH654kjmasfRas02fabf34x8%3D"
    }
  ]
}</code></pre>
<h3>URL miniatures</h3>
<p>Pour les vignettes, l'URL de base n'inclut généralement pas de nom de fichier. Comme pour les URL de sortie, elles seront mises à jour de manière à préserver les paramètres de chaîne de requête qui incluent un jeton SAS.</p>
<h4>Version de chaîne de requête</h4>
<pre class="line-numbers"><code class="language-json" translate="No">{
  "outputs": [
    {
      "thumbnails": [
        {
          "label": "my-thumbs",
          "number": 10,
          "base_url": "azure://account-name@container/path/to/thumbs/?sv=2019-10-10&si=sas-account&sr=c&sig=as87LKJHab87afjlghKJH654kjmasfRas02fabf34x8%3D"
        }
      ]
    }
  ]
}</code></pre>
<h4>Version séparée des paramètres</h4>
<pre class="line-numbers"><code class="language-json" translate="No">{
  "outputs": [
    {
      "thumbnails": [
        {
          "label": "my-thumbs",
          "number": 10,
          "base_url": "azure://account-name@container/path/to/thumbs/",
          "azure_sas": "sv=2019-10-10&si=sas-account&sr=c&sig=as87LKJHab87afjlghKJH654kjmasfRas02fabf34x8%3D"
        }
      ]
    }
  ]
}</code></pre>
</section>
</article>
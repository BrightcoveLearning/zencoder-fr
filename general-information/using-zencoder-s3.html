---
title: Utilisation de Zencoder avec S3 Description : Zencoder peut télécharger et télécharger des fichiers depuis votre compartiment Amazon S3. Pour que Zencoder puisse télécharger des fichiers, ils doivent soit être accessibles par tout le monde, soit une stratégie de compartiment doit être ajoutée à votre compartiment pour accorder l'accès à Zencoder, ou vous devez enregistrer les informations d'identification sur votre compte pour accéder au compartiment.
parent: General Information
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>

	<section class="bcls-section">
		<h2 id="Introduction">Introduction</h2>
		<p>Zencoder peut télécharger et télécharger des fichiers depuis votre compartiment Amazon S3. Pour que Zencoder puisse télécharger des fichiers, ils doivent être accessibles par tout le monde, ou une stratégie de compartiment doit être ajoutée à votre compartiment qui accordera l'accès à Zencoder, ou vous devez enregistrer les informations d'identification sur votre compte pour accéder au compartiment.</p>
		<aside class="bcls-aside bcls-aside--information">Notez que Zencoder prend uniquement en charge les compartiments Amazon AWS S3. <strong>Les compartiments de stockage compatibles S3 de fournisseurs non Amazon sont <em>pas</em> pris en charge.</strong></aside>
	</section>

  <section class="bcls-section">
    <h2 id="Use_credentials">Utiliser les informations d'identification</h2>

    <p>Vous pouvez économiser <a href="/encoding-settings/general/encoding-settings-general-output-settings.html#credentials">identifiants</a> sur votre compte, ce qui nous permettra d'utiliser votre compte pour télécharger des fichiers au lieu des nôtres. Cela signifie que votre compte est le propriétaire du fichier, avec tous les droits et privilèges sur celui-ci. Vous pouvez définir les informations d'identification comme valeur par défaut pour tous les téléchargements et téléchargements ou les référencer à chaque demande, mais gardez à l'esprit que si vous les définissez comme valeur par défaut pour S3, elles seront utilisées pour TOUS les téléchargements et téléchargements S3. En règle générale, ce n'est pas un problème, mais si vous souhaitez importer plus tard dans le bucket d'un tiers, cela peut entraîner des problèmes.</p>
  </section>
  <section class="bcls-section">
    <h2 id="Use_a_bucket_policy">Utilisez une politique de compartiment</h2>

    <p>Une autre option consiste à utiliser une stratégie de compartiment, qui vous permet de définir des autorisations sur tous les fichiers de votre compartiment. Pour commencer, visitez <a href="http://aws.amazon.com/console/">Console AWS</a>. Sélectionnez votre bucket sur le côté gauche de l'écran, puis cliquez sur "propriétés". Sur la dernière ligne, cliquez sur "Ajouter une politique de compartiment". Nous allons rassembler ci-dessous une politique de compartiment, que vous copierez dans la zone de texte Politique de compartiment.</p>

    <p>Notre politique de compartiment recommandée :</p>

    <pre class="line-numbers">
 <code class="language-json" translate="No">{
"Version": "2012-10-17",
"Id": "ZencoderBucketPolicy",
"Statement": [
  {
      "Sid": "Stmt1295042087538",
      "Effect": "Allow",
      "Principal": {
          "AWS": "arn:aws:iam::395540211253:root"
      },
      "Action": [
      "s3:GetObjectAcl",
      "s3:GetObject",
      "s3:PutObjectAcl",
      "s3:PutObject",
      "s3:ListMultipartUploadParts"
      ],
      "Resource": "arn:aws:s3:::MY-BUCKET/*"
  },
  {
      "Sid": "Stmt1295042087538",
      "Effect": "Allow",
      "Principal": {
          "AWS": "arn:aws:iam::395540211253:root"
      },
      "Action": [
      "s3:ListBucketMultipartUploads",
      "s3:GetBucketLocation"
      ],
      "Resource": "arn:aws:s3:::MY-BUCKET"
  }
]
}</code></pre>
    <aside class="bcls-aside bcls-aside--warning">Notez que même lorsque vous utilisez cette règle, les importations échoueront si le bucket est configuré pour bloquer les listes de contrôle d'accès publiques :
      <figure class="bcls-figure"><img class="bcls-image" alt="S3 ACL Permissions" src="/assets/images/general-information/acl-policy.png" />
        <figcaption class="bcls-caption--image">Autorisations ACL S3</figcaption>
      </figure>
    </aside>
    <p>Il n'y a que <strong>un changement que vous devrez faire</strong> à cette politique de compartiment avant qu'il ne soit prêt.</p>

    <ol>
      <li>Remplacez MY-BUCKET par le nom de votre seau. Laissez le / * à la fin de la ligne, car cela appliquera la stratégie à chaque fichier dans le compartiment.</li>
      <li>Le cas échéant, remplacez le tableau d'actions par les actions que vous souhaitez autoriser. Les actions valides dont Zencoder peut avoir besoin sont les suivantes :
        <h4>Autorisations d'objet : premier tableau d'actions de l'exemple ci-dessus</h4>

        <ul>
          <li><code translate="No">s3:PutObject</code>- permettre à Zencoder de charger des fichiers dans le compartiment</li>
          <li><code translate="No">s3:GetObject</code>- permettre à Zencoder de télécharger des fichiers depuis le compartiment</li>
          <li><code translate="No">s3:GetObjectAcl</code>- permettre à Zencoder d'obtenir des autorisations ACL pour les fichiers</li>
          <li><code translate="No">s3:PutObjectAcl</code>- permettre à Zencoder de définir des autorisations ACL pour d'autres utilisateurs sur des fichiers</li>
          <li><code translate="No">s3:ListMultipartUploadParts</code>- permettre à Zencoder de répertorier les parties d'un fichier partitions qui ont été téléchargées dans le compartiment</li>
        </ul>
        <h4>Autorisations de compartiment : deuxième tableau d'actions de l'exemple ci-dessus</h4>

        <ul>
          <li><code translate="No">s3:GetBucketLocation</code>- permettre à Zencoder d'obtenir l'emplacement du compartiment (États-Unis, UE, Asie, etc.)</li>
          <li><code translate="No">s3:ListBucketMultipartUploads</code>- permettre à Zencoder d'afficher tous les téléchargements partitionnés en cours sur le compartiment
            <p><code translate="No">ex:</code> Si vous souhaitez que Zencoder puisse télécharger et télécharger des fichiers, remplacez le premier tableau Action par :</p>

            <pre class="line-numbers">
<code class="language-json" translate="No">["s3:PutObject", "s3:GetObject"]</code></pre>
          </li>
        </ul>
      </li>
    </ol>
    <p>Notez qu'il y a deux énoncés dans la politique. La première instruction affecte les clés du compartiment, tandis que la deuxième partie affecte le compartiment lui-même.</p>

    <p>Le reste de la politique peut être laissé seul et cela fonctionnera bien. La documentation d'Amazon contient plus d'informations sur les <a href="http://docs.amazonwebservices.com/AmazonS3/latest/dev/index.html?UsingBucketPolicies.html">éléments d'une politique de compartiment.</a></p>

    <p>Zencoder peut également définir des autorisations ACL sur les vidéos et les miniatures que nous créons pour vous. Ceci est documenté dans notre <a href="/encoding-settings/sources-destinations/encoding-settings-s3-settings.html">Documentation sur l'API S3</a>.</p>

    <p><strong>Note :</strong> Lorsque vous utilisez une stratégie de compartiment, vous devez toujours utiliser des URL au format s3 : //BUCKET/KEY afin que Zencoder soit sûr de les identifier en tant qu'URL S3 et de signer la demande de manière appropriée.</p>

    <p>Si vous souhaitez créer votre propre politique de compartiment, vous pouvez utiliser <a href="http://awspolicygen.s3.amazonaws.com/policygen.html">Générateur de politiques d'Amazon</a>. Utiliser <em>arn : aws:iam። 395540211253 : root</em> en tant que principal AWS pour autoriser l'accès à Zencoder.</p>
  </section>
  <section class="bcls-section">
    <h2 id="Specific_files">Fichiers spécifiques</h2>

    <h3>Puis-je simplement accorder l'autorisation à des fichiers spécifiques ?</h3>

    <p>Vous pouvez certainement. Bien que l'approche de la politique de compartiment soit généralement plus simple et plus rapide, elle ne fonctionne pas bien pour tout le monde. Si c'est vous, vous pouvez accorder des autorisations à notre compte Amazon AWS, <code translate="No">aws@zencoder.com</code>.</p>

    <p>Si vous devez utiliser notre identifiant canonique à la place, vous pouvez utiliser <code translate="No">6c8583d84664a381db0c6af0e79b285ede571885fbe768e7ea50e5d3760597dd</code>.</p>
  </section>
  <section class="bcls-section">
    <h2>Dépannage</h2>

    <h3 id="Troubleshooting">J'ai toujours la permission refusée !</h3>

    <p>S3 répond par "Accès refusé" si l'accès est refusé ou si le fichier n'est pas trouvé. Si vous pensez avoir correctement configuré vos informations d'identification S3 ou votre stratégie de compartiment, mais que vous recevez toujours des erreurs "Accès refusé", vérifiez l'URL que vous soumettez. Si l'entrée ressemble <code translate="No">"s3://my-bucket/this+file+is+great.mp4"</code>, il y a de fortes chances que ce que vous voulez réellement soit <code translate="No">"s3://my-bucket/this file is great.mp4"</code></p>

    <h3>Je reçois une erreur lors de l'utilisation de la région de Francfort de l'UE !</h3>

    <p>Pour utiliser la région UE de Francfort avec Zencoder, vous devez générer des URL S3 contenant le nom de la région. Pour ce faire, créez simplement des URL comme celle-ci <code translate="No">"s3+eu-central-1://my-bucket/file.mp4"</code>.</p>
  </section>
</article>